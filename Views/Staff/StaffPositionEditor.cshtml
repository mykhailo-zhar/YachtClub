@model ObjectViewModel<StaffPosition>
<partial name="_Validation" />
<h5 class="bg-@Model.Theme text-white text-center p-2">@Model.Action</h5>
<form asp-action="@Model..Action" method="post">

    @if (Model.ShowReadOnlyFields)
    {
        <div class="form-group">
            <label asp-for="Object.Id"></label>
            <input class="form-control" asp-for="Object.Id" readonly />
        </div>
    }
    <div class="dropdown-divider"></div>
    @if (Model.Object.Position != null)
    {
        <label>@typeof(Position).Name</label>

        <div class="form-group">
            <label asp-for="Object.Position.Name"></label>
            <input class="form-control" value="@(Model.Object.Position.Name)"
                   readonly />
        </div>
    }
    @if (Model.Action != "Delete")
    {
        <div class="form-group">
            <label>Изменить объект</label>
            <select class="form-control" asp-for="Object.Positionid" asp-items="@(new SelectList(ViewData["Position"] as IEnumerable<Position> ?? Enumerable.Empty<Position>(), "Id", "Name"))"
                    disabled="@Model.ReadOnly">
                <option value="" disabled selected>Выберите должность</option>
            </select>
        </div>
    }

    <div class="dropdown-divider"></div>

    @if (Model.Object.Staff != null)
    {
        <label>@typeof(Staff).Name</label>
        <div class="form-group">
            <label asp-for="Object.Staff.Name"></label>
            <div>
                <span asp-validation-for="Object.Staff.Name" class="text-danger"></span>
            </div>
            <input class="form-control" value="@(Model.Object.Staff.Name)"
                   readonly />
        </div>

        <div class="form-group">
            <label asp-for="Object.Staff.Email"></label>
            <div>
                <span asp-validation-for="Object.Staff.Email" class="text-danger"></span>
            </div>
            <input class="form-control" value="@(Model.Object.Staff.Email)"
                   readonly />
        </div>
    }
    @if (Model.Action != "Delete")
    {
        <div class="form-group">
            <label>Изменить объект</label>
            <select class="form-control" asp-for="Object.Staffid" asp-items="@((ViewData["Staff"] as IEnumerable<Staff>).Select(p =>
                {
                    var item = new SelectListItem();
                    item.Text = $"{p.Name} {p.Surname} {p.Email}";
                    item.Value = $"{p.Id}";
                    return item;
                }))"
                    disabled="@Model.ReadOnly">
                <option value="" disabled selected>Выберите сотрудника</option>
            </select>
        </div>
    }
    @if (Model.Action != "Create")
    {
        <div class="form-group">
            <label asp-for="Object.Startdate"></label>
            <div>
                <span asp-validation-for="Object.Startdate" class="text-danger"></span>
            </div>
            <input class="form-control" asp-for="Object.Startdate"
                   readonly="@Model.ReadOnly" />
        </div>
        <div class="form-group">
            <label asp-for="Object.Enddate"></label>
            <div>
                <span asp-validation-for="Object.Enddate" class="text-danger"></span>
            </div>
            <input class="form-control" asp-for="Object.Enddate"
                   readonly="@(Model.ReadOnly || Model.Object.Enddate != null)" />
        </div>
    }

    <div class="form-group">
        <label asp-for="Object.Description"></label>
        <div>
            <span asp-validation-for="Object.Description" class="text-danger"></span>
        </div>
        <textarea class="form-control" asp-for="Object.Description"
               readonly="@(Model.ReadOnly)" ></textarea>
    </div>

    <partial name="_EditorBottomButtons" model="@new EditorBottomButtonsViewModel {
        ShowAction = Model.ShowAction,
        Theme = Model.Theme,
        Action = Model.ActionObjectName,
        BackAction = Model.Object.GetType().Name
    }" />
</form>
